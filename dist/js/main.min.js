!function(a,b,c,d){var e={currStep:0,questions:c(".question"),steps:c(".quiz-step"),$quizForm:c("#quizForm"),init:function(){this.buildQuiz()},buildQuiz:function(){var a=this;c.getJSON("dist/js/quiz-data.json",function(b){var d=c("#questions-wrapper"),e=QuizCore.templates["question-template"](b);d.html(e),a.questions=c(".question"),a.steps=c(".quiz-step"),a.steps[0].classList.add("visible"),a.setupButtonHandlers(),a.updateProgress(0)}).fail(function(){console.log("failed to get questions")})},updateProgress:function(a){var b=c("#progressBar"),d=c("#progressText"),e=this.steps.length-1;a<e?d.html("Question "+(a+1)+" of "+e):a==e&&d.html("Results"),b.css("width",(a+1)/(e+1)*100+"%")},setupButtonHandlers:function(){var a=c("#nextBtn"),b=c("#backBtn"),d=c("#finishBtn"),e=c("#resetBtn"),f=c(".question input"),g=this;a.on("click",function(){g.validateQuestion(g.currStep)?g.changeStep(!0):c("#validationMessage").removeClass("invisible")}),b.on("click",function(){g.changeStep(!1)}),f.on("change",function(){g.validateQuestion(g.currStep)}),d.on("click",function(){g.validateQuestion(g.currStep)?g.calculateResult():c("#validationMessage").removeClass("invisible")}),e.on("click",function(){g.steps[g.currStep].classList.remove("visible"),g.currStep=0,g.steps[0].classList.add("visible"),g.$quizForm[0].reset(),g.$quizForm.attr("class","quiz-wrapper first"),g.updateProgress(0)})},changeStep:function(a){var b,c=this.currStep,d="quiz-wrapper ",e=this.questions.length;this.steps[c].classList.toggle("visible"),b=this.currStep=a?++c:--c,this.steps[b].classList.toggle("visible"),0===b?d+="first":b==e-1?d+="last":b==e&&(d+="results"),this.updateProgress(b),this.$quizForm.attr("class",d)},validateQuestion:function(a){for(var d=!1,e=b.getElementsByName("q"+a),f=0;f<e.length;f++)!0===e[f].checked&&(d=!0,c("#validationMessage").addClass("invisible"));return d},calculateResult:function(){var a=c("#quizForm").serializeArray(),b="milford";"yesplus"==a[1].value?b="tongariro":"2"==a[0].value?b="routeburn":"mountains"==a[2].value?b="kepler":"oceans"==a[2].value&&(b="abeltasman"),this.fetchResultHtml(b)},fetchResultHtml:function(a){var b,d=c("#resultsWrapper"),e=this;c.getJSON("dist/js/results-data.json",function(c){var f=c.results[a];b=QuizCore.templates["results-template"](f),d.html(b),e.changeStep(!0)}).fail(function(){console.log("error getting results")})}};a.QuizController=e,c(b).ready(function(){e.init()})}(window,document,jQuery.noConflict());